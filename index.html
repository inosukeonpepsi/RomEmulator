<html>
<head>
  <style>
    body, html { margin: 0; padding: 0; font-family: sans-serif; background:#071026; color:white; }
    #game { width: 640px; height: 480px; max-width: 100%; margin: 20px auto; }
    input { margin: 20px; }
  </style>
</head>
<body>

<input type="file" id="romInput" accept=".nes,.zip">
<div id="game"></div>

<script src="https://cdn.emulatorjs.org/stable/data/loader.js"></script>
<script>
let nesInstance = null;

EJS_player = "#game";
EJS_core = "nes";
EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";

document.getElementById('romInput').addEventListener('change', async (e) => {
    const file = e.target.files[0];
    if(!file) return;

    const arrayBuffer = await file.arrayBuffer();

    try {
        nesInstance = new EmulatorJS.NES({
            canvas: document.getElementById('game'),
            onFrame: ()=>{},
            onAudio: ()=>{}
        });
        nesInstance.loadROM(new Uint8Array(arrayBuffer));
        nesInstance.start();
        console.log('NES started:', file.name);
    } catch(err) {
        console.error('Error starting NES:', err);
    }
});
</script>

</body>
</html>
